# 전세사기 감면 계산 로직 개선 PRD

## 프로젝트 개요
재산세 계산기의 전세사기 감면 계산 로직을 현행 단순 감면율 적용 방식에서 표준세율과 특례세율을 비교하여 최적의 세액을 선택하는 방식으로 개선

## 현재 상황
- 전세사기 감면 선택 시 단순히 50% 감면율만 적용
- 1세대 1주택 특례세율과의 비교 없이 일괄 적용
- 세부담상한제와의 비교도 단순화되어 있음

## 요구사항

### 핵심 기능
1. **전세사기 감면 선택 시 2단계 비교 로직 구현**
   - Step 1: 표준세율 + 전세사기 감면 vs 1세대 1주택 특례세율 비교
   - Step 2: Step 1 결과와 세부담상한제 적용액 비교

2. **구체적인 계산 로직**
   - 1세대 1주택 "예" 선택 + 전세사기 감면 선택 시:
     - A안: 표준세율 적용 → 전세사기 감면율 적용
     - B안: 1세대 1주택 특례세율 적용 (감면율 미적용)
     - A안과 B안 중 적은 값 선택
     - 선택된 값과 세부담상한제 적용액 중 적은 값을 최종 선택

3. **계산 과정 표시 개선**
   - 각 단계별 비교 과정을 상세히 표시
   - 어떤 방식이 선택되었는지 명확히 안내
   - 절약액 또는 선택 이유 표시

### 기술적 요구사항
1. **기존 코드 구조 유지**
   - `mainTaxCalculation.ts`의 기존 로직 최대한 활용
   - 다른 감면 유형(임대주택, 노후연금)에는 영향 없도록 구현

2. **함수 분리**
   - 전세사기 감면 전용 계산 함수 생성
   - 재사용 가능한 모듈화된 구조

3. **타입 안전성**
   - TypeScript 타입 정의 유지
   - 기존 PropertyData 인터페이스 활용

## 예시 시나리오
### 입력값
- 주택공시가격: 175,000,000원
- 과세표준: 75,250,000원
- 1세대 1주택: 예
- 전세사기 감면 선택
- 전년도 재산세 본세: 40,140원
- 세부담상한율: 105%

### 기대 출력
- Step 1: 표준세율 + 전세사기 감면 = 41,430원
- Step 2: 특례세율 (감면 미적용) = 45,250원
- Step 3: 두 값 비교 → 41,430원 선택
- Step 4: 세부담상한제 = 42,140원
- Step 5: 최종 비교 → 41,430원 최종 선택

## 성공 기준
1. 전세사기 감면 선택 시 2단계 비교 로직이 정확히 작동
2. 계산 과정이 명확하게 표시됨
3. 기존 다른 감면 유형의 계산에 영향 없음
4. 모든 엣지 케이스에서 정확한 계산 결과 제공 